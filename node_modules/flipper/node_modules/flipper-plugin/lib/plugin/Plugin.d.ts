/// <reference types="react" />
import { SandyPluginDefinition } from './SandyPluginDefinition';
import { BasePluginInstance, BasePluginClient } from './PluginBase';
import { FlipperLib } from './FlipperLib';
import { RealFlipperDevice } from './DevicePlugin';
import { Atom, ReadOnlyAtom } from '../state/atom';
declare type EventsContract = Record<string, any>;
declare type MethodsContract = Record<string, (params: any) => Promise<any>>;
declare type Message = {
    method: string;
    params?: any;
};
export interface PluginClient<Events extends EventsContract = {}, Methods extends MethodsContract = {}> extends BasePluginClient {
    readonly appId: string;
    readonly appName: string;
    readonly isConnected: boolean;
    readonly connected: ReadOnlyAtom<boolean>;
    onConnect(cb: () => void): void;
    onDisconnect(cb: () => void): void;
    onMessage<Event extends keyof Events>(event: Event, callback: (params: Events[Event]) => void): void;
    onUnhandledMessage(callback: (event: string, params: any) => void): void;
    send<Method extends keyof Methods>(method: Method, params: Parameters<Methods[Method]>[0]): ReturnType<Methods[Method]>;
    supportsMethod(method: keyof Methods): Promise<boolean>;
    isPluginAvailable(pluginId: string): boolean;
    selectPlugin(pluginId: string, deeplinkPayload?: unknown): void;
}
export interface RealFlipperClient {
    id: string;
    connected: Atom<boolean>;
    query: {
        app: string;
        os: string;
        device: string;
        device_id: string;
    };
    deviceSync: RealFlipperDevice;
    plugins: string[];
    isBackgroundPlugin(pluginId: string): boolean;
    initPlugin(pluginId: string): void;
    deinitPlugin(pluginId: string): void;
    call(api: string, method: string, fromPlugin: boolean, params?: Object): Promise<Object>;
    supportsMethod(api: string, method: string): Promise<boolean>;
}
export declare type PluginFactory<Events extends EventsContract, Methods extends MethodsContract> = (client: PluginClient<Events, Methods>) => object;
export declare type FlipperPluginComponent = React.FC<{}>;
export declare class SandyPluginInstance extends BasePluginInstance {
    static is(thing: any): thing is SandyPluginInstance;
    readonly realClient: RealFlipperClient;
    readonly client: PluginClient<any, any>;
    readonly connected: Atom<boolean>;
    constructor(flipperLib: FlipperLib, definition: SandyPluginDefinition, realClient: RealFlipperClient, pluginKey: string, initialStates?: Record<string, any>);
    activate(): void;
    deactivate(): void;
    connect(): void;
    disconnect(): void;
    destroy(): void;
    receiveMessages(messages: Message[]): void;
    toJSON(): string;
    private assertConnected;
}
export {};
//# sourceMappingURL=Plugin.d.ts.map