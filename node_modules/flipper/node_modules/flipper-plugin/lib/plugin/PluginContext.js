"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.usePlugin = exports.usePluginInstance = exports.SandyPluginContext = void 0;
const react_1 = require("react");
exports.SandyPluginContext = react_1.createContext(undefined);
function usePluginInstance() {
    const pluginInstance = react_1.useContext(exports.SandyPluginContext);
    if (!pluginInstance) {
        throw new Error('Sandy Plugin context not available');
    }
    return pluginInstance;
}
exports.usePluginInstance = usePluginInstance;
function usePlugin(plugin) {
    const pluginInstance = usePluginInstance();
    const pluginFromDefinition = pluginInstance.definition.isDevicePlugin
        ? pluginInstance.definition.asDevicePluginModule().devicePlugin
        : pluginInstance.definition.asPluginModule().plugin;
    if (pluginFromDefinition !== plugin) {
        throw new Error(`Plugin in context (${pluginFromDefinition}) didn't match the type of the requested plugin (${plugin})`);
    }
    return pluginInstance.instanceApi;
}
exports.usePlugin = usePlugin;
//# sourceMappingURL=PluginContext.js.map