/// <reference types="jest" />
import { RenderResult } from '@testing-library/react';
import { queries } from '@testing-library/dom';
import { BundledPluginDetails, InstalledPluginDetails } from 'flipper-plugin-lib';
import { PluginClient, PluginFactory } from '../plugin/Plugin';
import { SandyPluginDefinition, FlipperPluginModule, FlipperDevicePluginModule } from '../plugin/SandyPluginDefinition';
import { DeviceLogEntry } from '../plugin/DevicePlugin';
import { FlipperLib } from '../plugin/FlipperLib';
declare type Renderer = RenderResult<typeof queries>;
interface StartPluginOptions {
    initialState?: Record<string, any>;
    isArchived?: boolean;
    isBackgroundPlugin?: boolean;
    startUnactivated?: boolean;
    unsupportedMethods?: string[];
    GKs?: string[];
}
declare type ExtractClientType<Module extends FlipperPluginModule<any>> = Parameters<Module['plugin']>[0];
declare type ExtractMethodsType<Module extends FlipperPluginModule<any>> = ExtractClientType<Module> extends PluginClient<any, infer Methods> ? Methods : never;
declare type ExtractEventsType<Module extends FlipperPluginModule<any>> = ExtractClientType<Module> extends PluginClient<infer Events, any> ? Events : never;
interface BasePluginResult {
    flipperLib: FlipperLib;
    activate(): void;
    deactivate(): void;
    destroy(): void;
    triggerDeepLink(deeplink: unknown): Promise<void>;
    exportState(): Record<string, any>;
    exportStateAsync(): Promise<Record<string, any>>;
    triggerMenuEntry(label: string): void;
}
interface StartPluginResult<Module extends FlipperPluginModule<any>> extends BasePluginResult {
    instance: ReturnType<Module['plugin']>;
    module: Module;
    connect(): void;
    disconnect(): void;
    onSend: jest.MockedFunction<(<Method extends keyof ExtractMethodsType<Module>>(method: Method, params: Parameters<ExtractMethodsType<Module>[Method]>[0]) => ReturnType<ExtractMethodsType<Module>[Method]>)>;
    sendEvent<Event extends keyof ExtractEventsType<Module>>(event: Event, params: ExtractEventsType<Module>[Event]): void;
    sendEvents(events: {
        method: keyof ExtractEventsType<Module>;
        params: any;
    }[]): void;
}
interface StartDevicePluginResult<Module extends FlipperDevicePluginModule> extends BasePluginResult {
    instance: ReturnType<Module['devicePlugin']>;
    module: Module;
    sendLogEntry(logEntry: DeviceLogEntry): void;
}
export declare function startPlugin<Module extends FlipperPluginModule<any>>(module: Module, options?: StartPluginOptions): StartPluginResult<Module>;
export declare function renderPlugin<Module extends FlipperPluginModule<any>>(module: Module, options?: StartPluginOptions): StartPluginResult<Module> & {
    renderer: Renderer;
    act: (cb: () => void) => void;
};
export declare function startDevicePlugin<Module extends FlipperDevicePluginModule>(module: Module, options?: StartPluginOptions): StartDevicePluginResult<Module>;
export declare function renderDevicePlugin<Module extends FlipperDevicePluginModule>(module: Module, options?: StartPluginOptions): StartDevicePluginResult<Module> & {
    renderer: Renderer;
    act: (cb: () => void) => void;
};
export declare function createMockFlipperLib(options?: StartPluginOptions): FlipperLib;
export declare function createMockPluginDetails(details?: Partial<InstalledPluginDetails>): InstalledPluginDetails;
export declare function createTestPlugin<T extends PluginFactory<any, any>>(implementation: Pick<FlipperPluginModule<T>, 'plugin'> & Partial<FlipperPluginModule<T>>, details?: Partial<InstalledPluginDetails>): SandyPluginDefinition;
export declare function createTestDevicePlugin(implementation: Pick<FlipperDevicePluginModule, 'devicePlugin'> & Partial<FlipperDevicePluginModule>, details?: Partial<InstalledPluginDetails>): SandyPluginDefinition;
export declare function createMockBundledPluginDetails(details?: Partial<BundledPluginDetails>): BundledPluginDetails;
export {};
//# sourceMappingURL=test-utils.d.ts.map