"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TimelineDataDescription = void 0;
const react_1 = require("react");
const react_2 = __importDefault(require("react"));
const MarkerTimeline_1 = require("../MarkerTimeline");
const antd_1 = require("antd");
const DataDescription_1 = require("./DataDescription");
const DataInspector_1 = require("./DataInspector");
class TimelineDataDescription extends react_1.Component {
    constructor(props) {
        super(props);
        this.state = { selected: props.timeline.current };
    }
    render() {
        var _a, _b;
        const moments = Object.values(this.props.timeline.time);
        const firstMoment = moments[0].moment;
        const points = moments.map((value) => {
            var _a, _b;
            return ({
                label: value.display,
                time: value.moment - firstMoment,
                color: (_b = (_a = Object.entries(DataDescription_1.presetColors).find(([k, _]) => k === value.color)) === null || _a === void 0 ? void 0 : _a[1]) !== null && _b !== void 0 ? _b : value.color,
                key: value.key,
            });
        });
        return (react_2.default.createElement(react_2.default.Fragment, null,
            this.props.canSetCurrent && (react_2.default.createElement("div", null,
                react_2.default.createElement(antd_1.Button, { onClick: () => this.props.onClick(this.state.selected), disabled: this.state.selected === this.props.timeline.current }, "Set as current"))),
            react_2.default.createElement("div", null,
                react_2.default.createElement(MarkerTimeline_1.MarkerTimeline, { points: points, onClick: (ids) => this.setState({ selected: ids[0] }), maxGap: 50, selected: this.state.selected })),
            react_2.default.createElement("div", null,
                react_2.default.createElement(DataInspector_1.DataInspector, { data: (_b = (_a = this.props.timeline.time.find((value) => value.key === this.state.selected)) === null || _a === void 0 ? void 0 : _a.properties) !== null && _b !== void 0 ? _b : {} }))));
    }
}
exports.TimelineDataDescription = TimelineDataDescription;
//# sourceMappingURL=TimelineDataDescription.js.map