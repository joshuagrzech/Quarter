"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const index_1 = require("./index");
const environmentInfo_1 = require("./environmentInfo");
(async () => {
    const environmentInfo = await environmentInfo_1.getEnvInfo();
    console.log(JSON.stringify(environmentInfo));
    const healthchecks = index_1.getHealthchecks();
    const results = await Promise.all(Object.entries(healthchecks).map(async ([key, category]) => [
        key,
        category.isSkipped
            ? category
            : {
                label: category.label,
                results: await Promise.all(category.healthchecks.map(async ({ key, label, run }) => ({
                    key,
                    label,
                    result: await run(environmentInfo),
                }))),
            },
    ]));
    console.log(JSON.stringify(results, null, 2));
})();
//# sourceMappingURL=cli.js.map